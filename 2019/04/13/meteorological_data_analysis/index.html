<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="keywords" content="hexo,ä¸ªäººåšå®¢,blog" />
  <meta name="description" content="AlfredZeeçš„ä¸ªäººåšå®¢" />
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://busuanzi.ibruce.info">
  <link rel="dns-prefetch" href="https://at.alicdn.com">
  
  <link rel="dns-prefetch" href="https://widget.daovoice.io">
  <link rel="dns-prefetch" href="https://widget-static-cdn.daovoice.io">
  <link rel="dns-prefetch" href="https://im.daovoice.io">
  
  
  <link rel="dns-prefetch" href="https://hm.baidu.com/">
  
  
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="https://api.github.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  
  <link rel="stylesheet" type="text/css" href="/./style/main.css">
	<link rel="shortcut icon" href="/favicon.ico" title="Favicon">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
	<title>meteorological data analysis</title>
  
  <script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?awwssw1snsnsnn1ndndnndnd99j";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();
  </script>
  
  
    <script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/123456.js","daovoice");daovoice('init',{app_id: "123456"});daovoice('update');
  </script>
  
</head>
<body>
  <canvas id="pattern-placeholder" height="230"></canvas>
<div class="navbar-header">
  <a class="blog-title" href="/">Hexo</a>
  <a class="face-img" href="/">
    <img src="https://raw.githubusercontent.com/AlfredZee/image/master/1d28d196dac6e3960a2697478b981ac2.jpg">
  </a>
</div>
<main>
  <div class="article-title">
    
  
  <h1 class="title">
    meteorological data analysis
  </h1>
  


    <ul class="article-info">
      <li>
        å‘å¸ƒ
        <time datetime="2019-04-12T16:00:00.000Z" itemprop="datePublished">2019-04-13</time>
      </li>
      <li>
        
    æ›´æ–° <time datetime="2019-05-01T08:08:43.067Z" itemprop="dateUpdated">2019-05-01</time>

      </li>
      <li id="busuanzi_container_page_pv">
        é˜…è¯» <span id="busuanzi_value_page_pv"></span>
      </li>
    </ul>
  </div>
  <div class="container">
    <div class="article">
      <div class="content">
        
        <h1 id="åˆ©ç”¨SVRè¿›è¡Œé•¿ä¸‰è§’åœ°åŒºæ°”è±¡æ•°æ®ä¸ç¦»æµ·è·ç¦»åŠæ°”è±¡æ•°æ®é—´çš„å…³ç³»åˆ†æ"><a href="#åˆ©ç”¨SVRè¿›è¡Œé•¿ä¸‰è§’åœ°åŒºæ°”è±¡æ•°æ®ä¸ç¦»æµ·è·ç¦»åŠæ°”è±¡æ•°æ®é—´çš„å…³ç³»åˆ†æ" class="headerlink" title="åˆ©ç”¨SVRè¿›è¡Œé•¿ä¸‰è§’åœ°åŒºæ°”è±¡æ•°æ®ä¸ç¦»æµ·è·ç¦»åŠæ°”è±¡æ•°æ®é—´çš„å…³ç³»åˆ†æ"></a>åˆ©ç”¨SVRè¿›è¡Œé•¿ä¸‰è§’åœ°åŒºæ°”è±¡æ•°æ®ä¸ç¦»æµ·è·ç¦»åŠæ°”è±¡æ•°æ®é—´çš„å…³ç³»åˆ†æ</h1><hr>
<p><strong>copyright: å¾æ¸Š å¤§è¿ç†å·¥å¤§å­¦ç”µä¿¡å­¦éƒ¨</strong></p>
<p><strong>gitbub: AlfredZee.github.io</strong></p>
<p><strong>reference: pythonæ•°æ®åˆ†æå®æˆ˜ï¼Œå®éªŒæ¥¼</strong></p>
<p><strong>time: 2019-4-13</strong></p>
<p><strong>QQ: 1239820340ï¼ˆè”ç³»è¯·æ³¨æ˜åŸå› ï¼‰</strong></p>
<hr>
<h2 id="1é¡¹ç›®çš„æå‡ºåŠæ„ä¹‰"><a href="#1é¡¹ç›®çš„æå‡ºåŠæ„ä¹‰" class="headerlink" title="$1é¡¹ç›®çš„æå‡ºåŠæ„ä¹‰"></a>$1é¡¹ç›®çš„æå‡ºåŠæ„ä¹‰</h2><p>æœ¬é¡¹ç›®æ˜¯ä¸ªäººé¡¹ç›®ï¼Œå‡ç”±ç¬”è€…ä¸€äººå®Œæˆï¼Œåœ¨ç¡®å®šé¡¹ç›®çš„ç ”ç©¶å¯¹è±¡æ—¶ï¼Œé€‰å–äº†ç¬”è€…ç”Ÿæ´»çš„é•¿æ±Ÿä¸‰è§’æ´²ï¼Œä¸»è¦ç›®çš„æ˜¯é”»ç‚¼ç”¨pythonå¤„ç†æ•°æ®çš„èƒ½åŠ›ï¼Œæ•…é€‰å–äº†æ¯”è¾ƒä¸€èˆ¬çš„ï¼Œæ˜“è·å–çš„æ°”è±¡æ•°æ®è¿›è¡Œå®éªŒï¼ŒåŒæ—¶ä¹Ÿå¢è¿›å¯¹æ•…ä¹¡çš„äº†è§£</p>
<h2 id="2æ•°æ®è·å–"><a href="#2æ•°æ®è·å–" class="headerlink" title="$2æ•°æ®è·å–"></a>$2æ•°æ®è·å–</h2><p>æœ¬æ¬¡å®éªŒçš„æ°”è±¡æ•°æ®å–è‡ªOpenweathermapï¼Œè¯¥ç½‘ç«™ä¸Šæœ‰å…¨çƒå„å¤§åŸå¸‚çš„å†å²ï¼Œå®æ—¶ä»¥åŠæœªæ¥é¢„æµ‹çš„æ°”è±¡æ•°æ®ã€‚</p>
<p>è¯¥ç½‘ç«™æœ‰ä»¥ä¸‹æ³¨æ„ç‚¹ï¼š</p>
<ul>
<li>ä½†é’ˆå¯¹ä¸åŒæƒé™çš„ç”¨æˆ·ï¼Œæœ‰ä¸åŒçš„æƒé™é™åˆ¶ï¼Œfreeerç”¨æˆ·åªèƒ½è·å–å®æ—¶ï¼Œæœªæ¥5å¤©æ¯ä¸‰å°æ—¶é¢„æŠ¥çš„æ•°æ®ï¼Œå…·ä½“å¯ä»¥å‚ç…§<a href="https://openweathermap.org/price" target="_blank" rel="noopener">price</a></li>
<li>ä¸‹è½½è¯¥ç½‘ç«™çš„æ•°æ®éœ€è¦å…ˆæ³¨å†Œç”¨æˆ·ï¼Œç„¶åç”¨è‡ªå·±çš„API KEYå»è°ƒç”¨ç½‘ç«™çš„APIï¼ŒAPIæ ¼å¼å¯ä»¥å‚ç…§<a href="https://openweathermap.org/forecast5" target="_blank" rel="noopener">api</a>(5 days per 3 hours)</li>
<li>è°ƒç”¨APIæ—¶å¯ä»¥æŒ‰ç…§city nameæŸ¥è¯¢ï¼ˆå¦‚æœä½ ä¸æƒ³è‡ªå·±å†™è„šæœ¬å»æŸ¥åŸå¸‚å¯¹åº”çš„idï¼‰ï¼Œæ³¨æ„åœ¨åŸå¸‚åé¢åŠ ä¸Šcountry(æ¯”å¦‚ä¸­å›½CN)ï¼Œä¸ç„¶å¯èƒ½æ£€ç´¢åˆ°å¦ä¸€åŸå¸‚æ•°æ®</li>
<li>ç½‘ç«™æä¾›çš„æ•°æ®ä¸ºjsonæ ¼å¼æ ¸xmlæ ¼å¼ï¼Œå¦‚æœæ‚¨éå¸¸å¯Œæœ‰ï¼Œå¯ä»¥èŠ±ä¸Š10$/cityå»ä¸‹è½½6å¹´ä»¥å†…çš„æ•°æ®ï¼Œå¹¶ä¸”ä¿å­˜ä¸ºcsvæ ¼å¼ï¼Œæˆ–è€…æ‚¨å¯ä»¥æŸ¥çœ‹ç¬¬ä¸‰éƒ¨åˆ†æ•°æ®é¢„å¤„ç†ï¼Œå°†jsonæ ¼å¼æ•°æ®è½¬æ¢ä¸ºcsvæ ¼å¼</li>
<li>ç‰¹åˆ«æ³¨æ„è¯¥APIæ–‡æ¡£ç½‘ç«™ä¸Šçš„exampleé“¾æ¥å¹¶éè°ƒç”¨apiçš„é“¾æ¥ï¼Œè€Œæ˜¯é™„ç€åœ¨æ–‡æ¡£ç½‘ç«™ä¸Šçš„é™æ€é“¾æ¥ï¼Œåˆ‡å‹¿åƒç¬”è€…å¯¹ç€å®ƒæ”¹äº†åŠå¤©è¿˜æ˜¯401ï¼Œ404</li>
</ul>
<p>æœ¬æ¬¡å®éªŒçš„æ•°æ®è·å–ï¼š</p>
<ul>
<li>æ°”è±¡æ•°æ®ï¼šåˆšå¼€å§‹ç¬”è€…ä»å¹¿æ³›çš„é•¿ä¸‰è§’åœ°åŒºè·å–æ•°æ®ï¼ˆä»æµ™æ±Ÿä¸­éƒ¨åˆ°æ±Ÿè‹åŒ—éƒ¨ï¼‰ï¼Œå¤„ç†äº†ä¸€éƒ¨åˆ†åå‘ç°å¹¶æ²¡æœ‰è§„å¾‹å¯å¾ªï¼Œæ€è€ƒåè§‰å¾—å¯èƒ½æ—¶ç»´åº¦è·¨è¶Šè¿‡å¤§é€ æˆå¹²æ‰°ï¼Œæ‰€ä»¥ä¹‹åæ”¹é€‰äº†ç»´åº¦åœ¨30å·¦å³ï¼ˆåªå«æ±Ÿè‹ä¸­å—éƒ¨å’Œå®‰å¾½ä¸¤åŸå¸‚ï¼‰ï¼Œæ‚¨åœ¨é€‰å–åŸå¸‚æ—¶è¯·åŠ¡å¿…è€ƒè™‘æ­¤é—®é¢˜ï¼Œä¸ç„¶å°±ä¼šåƒç¬”è€…ä¸€æ ·åœ¨æ•°æ®å¤„ç†æ—¶å‘ç°é—®é¢˜å†å›æ¥é‡æ–°ä¸‹è½½æ•°æ®ï¼Œéå¸¸æµªè´¹æ—¶é—´</li>
<li>ç¦»æµ·è·ç¦»ï¼šè¯¥æ•°æ®çš„è·å–å¯èƒ½ä¸å¤ªç²¾å‡†ï¼Œæ˜¯ç¬”è€…ä»é«˜å¾·åœ°å›¾æµ‹è·è·å¾—ï¼ˆè¯·åŠ¡å¿…é€‰æ‹©é«˜å¾·åœ°å›¾ï¼‰ï¼ˆç¦»æµ·è·ç¦»è¿™ä¸ªæ•°æ®å¥½åƒå®åœ¨æ²¡æœ‰ç›´æ¥è·å–çš„åœ°æ–¹ï¼‰</li>
<li>æœ¬æ¬¡å®éªŒé€‰å–çš„åŸå¸‚æœ€å¥½æ»¡è¶³ç›¸åŒçš„æ¡ä»¶ï¼ˆå—å¤–éƒ¨å¹²æ‰°å°‘ï¼‰ï¼Œæ¯”å¦‚è‹å·å’Œæ— é”¡ï¼Œç´§æŒ¨ç€å¤ªæ¹–ï¼Œä¸€å®šæœ‰è¾ƒå¤§çš„åå·®ï¼Œå› è¯¥é¿å…é€‰å–</li>
<li>æœ€ç»ˆé€‰æ‹©çš„åŸå¸‚ä¸ºï¼šå¯ä¸œï¼Œå—é€šï¼Œæ³°å·ï¼Œæµ·é—¨ï¼Œå—äº¬ï¼Œæ‰¬å·ï¼Œé•‡æ±Ÿï¼Œé©¬éå±±ï¼Œåˆè‚¥ï¼Œå·¢æ¹–ï¼Œæ»å·</li>
</ul>
<h2 id="3æ•°æ®é¢„å¤„ç†"><a href="#3æ•°æ®é¢„å¤„ç†" class="headerlink" title="$3æ•°æ®é¢„å¤„ç†"></a>$3æ•°æ®é¢„å¤„ç†</h2><p>æœ¬å®éªŒçš„æ•°æ®é¢„å¤„ç†ä¸»è¦ä¸ºjsonåˆ°csvçš„è½¬æ¢ï¼Œä»¥åŠæ·»åŠ ç¦»æµ·è·ç¦»è¿™ä¸€åˆ—</p>
<ul>
<li><p>1.éœ€è¦importçš„åº“ï¼š</p>
<pre><code>import pandas as pd
import numpy as np
import json
</code></pre></li>
<li><p>2.ä»æ–‡ä»¶ä¸­åŠ è½½æ•°æ®ï¼š</p>
<pre><code># get path and load data
jsonfile_path = &quot;/home/singularity/æ¡Œé¢/weather_ana/jsonfile/maanshan.json&quot;
with open(jsonfile_path, &quot;r&quot;, encoding = &quot;utf-8&quot;) as j_obj:
json_data = json.load(j_obj)
</code></pre></li>
<li><p>3.ä»åµŒå¥—åˆ—è¡¨å­—å…¸ä¸­è·å–ç›¸åº”keyçš„valueçš„ä¸¤ä¸ªå‡½æ•°ï¼š</p>
<pre><code># 2 functions for data fetching
def get_target_value(key, dic, tmp_list):
    &quot;&quot;&quot;
    :param key: ç›®æ ‡keyå€¼
    :param dic: JSONæ•°æ®
    :param tmp_list: ç”¨äºå­˜å‚¨è·å–çš„æ•°æ®
    :return: list
    &quot;&quot;&quot;
    if not isinstance(dic, dict) or not isinstance(tmp_list, list):  # å¯¹ä¼ å…¥æ•°æ®è¿›è¡Œæ ¼å¼æ ¡éªŒ
        return &apos;argv[1] not an dict or argv[-1] not an list &apos;

    if key in dic.keys():
        tmp_list.append(dic[key])  # ä¼ å…¥æ•°æ®å­˜åœ¨åˆ™å­˜å…¥tmp_list
    else:
        for value in dic.values():  # ä¼ å…¥æ•°æ®ä¸ç¬¦åˆåˆ™å¯¹å…¶valueå€¼è¿›è¡Œéå†
            if isinstance(value, dict):
                get_target_value(key, value, tmp_list)  # ä¼ å…¥æ•°æ®çš„valueå€¼æ˜¯å­—å…¸ï¼Œåˆ™ç›´æ¥è°ƒç”¨è‡ªèº«
            elif isinstance(value, (list, tuple)):
                _get_value(key, value, tmp_list)  # ä¼ å…¥æ•°æ®çš„valueå€¼æ˜¯åˆ—è¡¨æˆ–è€…å…ƒç»„ï¼Œåˆ™è°ƒç”¨_get_value
    return tmp_list

def _get_value(key, val, tmp_list):
    for val_ in val:
        if isinstance(val_, dict):  
            get_target_value(key, val_, tmp_list)  # ä¼ å…¥æ•°æ®çš„valueå€¼æ˜¯å­—å…¸ï¼Œåˆ™è°ƒç”¨get_target_value
        elif isinstance(val_, (list, tuple)):
            _get_value(key, val_, tmp_list)
</code></pre></li>
<li><p>4.ä»å†…å­˜å–å‡ºæ•°æ®ï¼ˆä¸‹è½½çš„æ•°æ®æ¯ä¸ªåŸå¸‚æœ‰38æ¡ï¼Œè€Œnameè¿™ä¸ªkeyåœ¨jsonå­—å…¸ä¸­åªæœ‰1ä¸ªï¼Œdistä¸ºè‡ªå·±æ·»åŠ çš„åˆ—ï¼‰ï¼š</p>
<pre><code># get data from json
name_lst = get_target_value(&apos;name&apos;, json_data, [])
city = name_lst[0]
name_lst = [city for i in range (1, 39)]
temp_lst = get_target_value(&apos;temp&apos;, json_data, [])
temp_min_lst = get_target_value(&apos;temp_min&apos;, json_data, [])
temp_max_lst = get_target_value(&apos;temp_max&apos;, json_data, [])
sea_level_lst = get_target_value(&apos;sea_level&apos;, json_data, [])
grnd_level_lst = get_target_value(&apos;grnd_level&apos;, json_data, [])
pressure_lst = get_target_value(&apos;pressure&apos;, json_data, [])
humidity_lst = get_target_value(&apos;humidity&apos;, json_data, [])
speed_lst = get_target_value(&apos;speed&apos;, json_data, [])
deg_lst = get_target_value(&apos;deg&apos;, json_data, [])
description_lst = get_target_value(&apos;description&apos;, json_data, [])
time_lst = get_target_value(&apos;dt_txt&apos;,json_data,[])
dist_qidong_lst = [23.5 for i in range(1, 39)]
dist_haimen_lst = [66.10 for i in range(1, 39)]
dist_nantong_lst = [89 for i in range(1, 39)]
dist_taizhou_lst = [122 for i in range(1, 39)]
dist_yangzhou_lst = [182 for i in range(1, 39)]
dist_zhenjiang_lst = [190 for i in range(1, 39)]
dist_nanjing_lst = [258 for i in range(1, 39)]
dist_chuzhou_lst = [293 for i in range(1, 39)]
dist_maanshan_lst = [330 for i in range(1, 39)]
dist_chaohu_lst = [390 for i in range(1, 39)]
dist_hefei_lst = [440 for i in range(1, 39)]
</code></pre></li>
<li><p>5.åˆ©ç”¨pandasæ„å»ºdata frameï¼Œæ‹¼æ¥åè¾“å‡ºï¼š</p>
<pre><code># transform data to column
name_se = pd.Series(name_lst, name = &apos;name&apos;)
temp_se = pd.Series(temp_lst, name = &apos;temp&apos;)
temp_min_se = pd.Series(temp_min_lst, name = &apos;temp_min&apos;)
temp_max_se = pd.Series(temp_max_lst, name = &apos;temp_max&apos;)
sea_level_se = pd.Series(sea_level_lst, name = &apos;sea_level&apos;)
grnd_level_se = pd.Series(grnd_level_lst, name = &apos;grnd_level&apos;)
pressure_se = pd.Series(pressure_lst, name = &apos;pressure&apos;)
humidity_se = pd.Series(humidity_lst, name = &apos;humidity&apos;)
speed_se = pd.Series(speed_lst, name = &apos;speed&apos;)
deg_se = pd.Series(deg_lst, name = &apos;deg&apos;)
description_se = pd.Series(description_lst, name = &apos;description&apos;)
time_se = pd.Series(time_lst, name = &apos;time&apos;)

# add dist column
dist_qidong_se = pd.Series(dist_qidong_lst, name = &apos;dist&apos;)
dist_haimen_se = pd.Series(dist_haimen_lst, name = &apos;dist&apos;)
dist_nantong_se = pd.Series(dist_nantong_lst, name = &apos;dist&apos;)
dist_taizhou_se = pd.Series(dist_taizhou_lst, name = &apos;dist&apos;)
dist_yangzhou_se = pd.Series(dist_yangzhou_lst, name = &apos;dist&apos;)
dist_zhenjiang_se = pd.Series(dist_zhenjiang_lst, name = &apos;dist&apos;)
dist_nanjing_se = pd.Series(dist_nanjing_lst, name = &apos;dist&apos;)
dist_chuzhou_se = pd.Series(dist_chuzhou_lst, name = &apos;dist&apos;)
dist_maanshan_se = pd.Series(dist_maanshan_lst, name = &apos;dist&apos;)
dist_chaohu_se = pd.Series(dist_chaohu_lst, name = &apos;dist&apos;)
dist_hefei_se = pd.Series(dist_hefei_lst, name = &apos;dist&apos;)
# put columns together and output
result_df = pd.concat([name_se, temp_se,temp_min_se, temp_max_se, 
                        sea_level_se, grnd_level_se, pressure_se, 
                        humidity_se, speed_se, deg_se, description_se,
                        time_se, dist_maanshan_se], axis = 1)
result_df.to_csv(&apos;maanshan.csv&apos;, index = False, sep = &apos;,&apos;)
</code></pre></li>
<li><p>è¯´æ˜ï¼šä¸Šè¿°å¤„ç†è„šæœ¬ä»…ä¸ºé©¬éå±±å¸‚çš„csvæ–‡ä»¶è¾“å‡ºï¼Œå…¶ä»–åŸå¸‚è¯·æ”¹å˜2ä¸­jsonåŠ è½½æ–‡ä»¶å’Œ5ä¸­csvè¾“å‡ºæ–‡ä»¶ï¼ˆç”±äºæ˜¯ä¸€ä¸ªä¸€ä¸ªæ–‡ä»¶å¤„ç†ï¼Œå¦‚æœä¸€å¼€å§‹åŸå¸‚æ²¡é€‰å¥½å°±è¦é‡æ–°æ”¹ä¸€éæ–‡ä»¶åå†ä¸€ä¸ªä¸€ä¸ªè¾“å‡ºï¼Œå†æ¬¡æé†’ç¡®å®šå¥½æ•°æ®çš„é‡è¦æ€§ï¼ï¼‰</p>
<h2 id="4æ•°æ®åˆ†æ"><a href="#4æ•°æ®åˆ†æ" class="headerlink" title="$4æ•°æ®åˆ†æ"></a>$4æ•°æ®åˆ†æ</h2></li>
<li><p>1.åˆ›å»ºcsvæ•°æ®åŠ è½½è„šæœ¬</p>
<pre><code>import pandas as pd

df_qidong = pd.read_csv(&apos;/home/singularity/æ¡Œé¢/weather_ana/csvfile_30/qidong.csv&apos;)
df_haimen = pd.read_csv(&apos;/home/singularity/æ¡Œé¢/weather_ana/csvfile_30/haimen.csv&apos;)
df_nantong = pd.read_csv(&apos;/home/singularity/æ¡Œé¢/weather_ana/csvfile_30/nantong.csv&apos;)
df_yangzhou = pd.read_csv(&apos;/home/singularity/æ¡Œé¢/weather_ana/csvfile_30/yangzhou.csv&apos;)
df_zhenjiang = pd.read_csv(&apos;/home/singularity/æ¡Œé¢/weather_ana/csvfile_30/zhenjiang.csv&apos;)
df_nanjing = pd.read_csv(&apos;/home/singularity/æ¡Œé¢/weather_ana/csvfile_30/nanjing.csv&apos;)
df_chuzhou = pd.read_csv(&apos;/home/singularity/æ¡Œé¢/weather_ana/csvfile_30/chuzhou.csv&apos;)
df_maanshan = pd.read_csv(&apos;/home/singularity/æ¡Œé¢/weather_ana/csvfile_30/maanshan.csv&apos;)
df_chaohu = pd.read_csv(&apos;/home/singularity/æ¡Œé¢/weather_ana/csvfile_30/chaohu.csv&apos;)
df_hefei = pd.read_csv(&apos;/home/singularity/æ¡Œé¢/weather_ana/csvfile_30/hefei.csv&apos;)
df_taizhou = pd.read_csv(&apos;/home/singularity/æ¡Œé¢/weather_ana/csvfile_30/taizhou.csv&apos;)
</code></pre></li>
<li><p>2.ç”Ÿæˆç¦»æµ·è·ç¦»-æ¸©åº¦ï¼Œç¦»æµ·è·ç¦»-æ°”å‹ï¼Œç¦»æµ·è·ç¦»-é€‚åº¦ï¼Œç¦»æµ·è·ç¦»-é£é€Ÿçš„å›¾åƒï¼Œä¸‹ä»¥ç¦»æµ·è·ç¦»-æ¸©åº¦ä¸ºä¾‹ï¼š</p>
</li>
</ul>
<pre><code>import data_load as dl

import matplotlib.pyplot as plt

dist_lst = [dl.df_qidong[&apos;dist&apos;][0],
            dl.df_haimen[&apos;dist&apos;][0],
            dl.df_nantong[&apos;dist&apos;][0],
            dl.df_taizhou[&apos;dist&apos;][0],
            dl.df_yangzhou[&apos;dist&apos;][0],
            dl.df_zhenjiang[&apos;dist&apos;][0],
            dl.df_nanjing[&apos;dist&apos;][0],
            dl.df_chuzhou[&apos;dist&apos;][0],
            dl.df_maanshan[&apos;dist&apos;][0],
            dl.df_chaohu[&apos;dist&apos;][0],
            dl.df_hefei[&apos;dist&apos;][0],
]

temp_lst = [dl.df_qidong[&apos;temp&apos;].sum()/38,
            dl.df_haimen[&apos;temp&apos;].sum()/38,
            dl.df_nantong[&apos;temp&apos;].sum()/38,
            dl.df_taizhou[&apos;temp&apos;].sum()/38,
            dl.df_yangzhou[&apos;temp&apos;].sum()/38,
            dl.df_zhenjiang[&apos;temp&apos;].sum()/38,
            dl.df_nanjing[&apos;temp&apos;].sum()/38,
            dl.df_chuzhou[&apos;temp&apos;].sum()/38,
            dl.df_maanshan[&apos;temp&apos;].sum()/38,
            dl.df_chaohu[&apos;temp&apos;].sum()/38,
            dl.df_hefei[&apos;temp&apos;].sum()/38,
]

temp_max_lst = [dl.df_qidong[&apos;temp&apos;].max(),
            dl.df_haimen[&apos;temp&apos;].max(),
            dl.df_nantong[&apos;temp&apos;].max(),
            dl.df_taizhou[&apos;temp&apos;].max(),
            dl.df_yangzhou[&apos;temp&apos;].max(),
            dl.df_zhenjiang[&apos;temp&apos;].max(),
            dl.df_nanjing[&apos;temp&apos;].max(),
            dl.df_chuzhou[&apos;temp&apos;].max(),
            dl.df_maanshan[&apos;temp&apos;].max(),
            dl.df_chaohu[&apos;temp&apos;].max(),
            dl.df_hefei[&apos;temp&apos;].max(),
]

temp_min_lst = [dl.df_qidong[&apos;temp&apos;].min(),
            dl.df_haimen[&apos;temp&apos;].min(),
            dl.df_nantong[&apos;temp&apos;].min(),
            dl.df_taizhou[&apos;temp&apos;].min(),
            dl.df_yangzhou[&apos;temp&apos;].min(),
            dl.df_zhenjiang[&apos;temp&apos;].min(),
            dl.df_nanjing[&apos;temp&apos;].min(),
            dl.df_chuzhou[&apos;temp&apos;].min(),
            dl.df_maanshan[&apos;temp&apos;].min(),
            dl.df_chaohu[&apos;temp&apos;].min(),
            dl.df_hefei[&apos;temp&apos;].min(),
]

&apos;&apos;&apos;
    1.use codes below only when you need to get the fig for you still
      need codes above to do SVR 
    2.replace temp_lst with temp_min_lst and temp_max_lst
&apos;&apos;&apos;

&apos;&apos;&apos;
fig, ax = plt.subplots()
plt.plot(dist_lst, temp_lst, &apos;go&apos;)
plt.savefig(&quot;/home/singularity/æ¡Œé¢/weather_ana/result/dist_avetemp_conn&quot;)
plt.show()
&apos;&apos;&apos;
</code></pre><ul>
<li>3.æ ¹æ®å›¾åƒçŒœæµ‹å¯èƒ½å­˜åœ¨çš„çº¿æ€§å…³ç³»ï¼š</li>
</ul>
<p>é€šè¿‡ä¸‹é¢çš„ç¦»æµ·è·ç¦»-æ—¥å‡æ°”æ¸©ï¼Œæˆ‘ä»¬å‘ç°å¥½åƒä¸¤è€…å¹¶æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œæˆ‘ä»¬çŒœæƒ³å¯èƒ½æœ€é«˜æ°”æ¸©å’Œæœ€ä½æ°”æ¸©ç›¸äº’æŠµæ¶ˆï¼Œéœ€è¦è¿›ä¸€æ­¥åˆ†æç¦»æµ·è·ç¦»å’Œæœ€é«˜ï¼Œæœ€ä½æ°”æ¸©çš„å…³ç³»ã€‚</p>
<p>this is a test</p>
<p><img src="dist_avetemp_conn.png" alt="ç¦»æµ·è·ç¦»-æ—¥å¹³å‡æ°”æ¸©"></p>
<p>ç”±ä¸‹é¢ç»“æœå¯çŸ¥ï¼Œæœç„¶ï¼Œç¦»æµ·è·ç¦»å’Œæœ€é«˜æœ€ä½æ°”æ¸©å­˜åœ¨ç€ä¸€å®šçš„å…³ç³»ï¼Œå°±æœ€é«˜æ°”æ¸©è€Œè¨€ï¼Œéšç€ç¦»æµ·è·ç¦»çš„å¢å¤§ï¼Œæœ€é«˜æ°”æ¸©é€æ¸å‡é«˜ï¼Œåˆ°æŸä¸€è·ç¦»åï¼Œæœ€é«˜æ°”æ¸©ä¸å˜ï¼Œå› ä¸ºç™½å¤©æ¸©åº¦é«˜ï¼Œæœ€é«˜æ°”æ¸©ä¸€å®šå‡ºç°å†ç™½å¤©ï¼Œç”±äºæµ·æ°´æ¯”çƒ­å®¹å¤§ï¼Œç™½å¤©æµ·è¾¹æ¸©åº¦ä½ï¼Œæ‰€ä»¥æœ‰ä»¥ä¸Šç°è±¡ã€‚</p>
<p><img src="dist_maxtemp_conn.png" alt="ç¦»æµ·è·ç¦»-æ—¥æœ€é«˜æ°”æ¸©"></p>
<p><img src="dist_mintemp_conn.png" alt="ç¦»æµ·è·ç¦»-æ—¥æœ€ä½æ°”æ¸©"></p>
<p>åŒæ ·æˆ‘ä»¬å¯ä»¥åˆ†æç¦»æµ·è·ç¦»å’Œå¹³å‡ï¼Œæœ€é«˜ï¼Œæœ€ä½æ¹¿åº¦çš„å…³ç³»ï¼Œä¸‹é¢å¹³å‡æ¹¿åº¦å’Œæœ€ä½æ¹¿åº¦ç”±äºæ•°æ®é‡é—®é¢˜ï¼Œå¥½åƒå¹¶å‘ç°ä¸åˆ°ä»€ä¹ˆçº¿æ€§å…³ç³»ï¼Œè€Œå°±æœ€é«˜æ¹¿åº¦è€Œè¨€ï¼Œåœ¨æŸä¸€è·ç¦»ä¹‹å†…ï¼Œæœ€é«˜æ¹¿åº¦å’Œç¦»æµ·è·ç¦»å­˜åœ¨ç€çº¿æ€§å…³ç³»</p>
<p><img src="dist_avehumidity_conn.png" alt="ç¦»æµ·è·ç¦»-æ—¥å¹³å‡æ¹¿åº¦"></p>
<p><img src="dist_maxhumidity_conn.png" alt="ç¦»æµ·è·ç¦»-æ—¥æœ€é«˜æ¹¿åº¦"></p>
<p><img src="dist_minhumidity_conn.png" alt="ç¦»æµ·è·ç¦»-æ—¥æœ€ä½æ¹¿åº¦"></p>
<p>è€Œå¯¹äºå¹³å‡æ°”å‹ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸æ¹¿åº¦ç±»ä¼¼çš„ç»“è®ºï¼Œåªä¸è¿‡å°±æ°”å‹è€Œè¨€ï¼Œåœ¨æŸä¸€è·ç¦»ä¹‹å†…ï¼Œæ˜¯æœ€ä½æ°”å‹å’Œç¦»æµ·è·ç¦»å­˜åœ¨ç€çº¿æ€§å…³ç³»ï¼Œæˆ‘ä»¬å†è¿›ä¸€æ­¥æ€è€ƒï¼Œå…¶å®ç€ä½“ç°äº†æ¹¿åº¦å’Œæ°”å‹ä¹‹é—´çš„å…³ç³»ï¼Œæ¹¿åº¦è¶Šå¤§ï¼Œç©ºæ°”ä¸­æ°´æ±½è¶Šå……åˆ†ï¼Œæ°”å‹å°±ä¼šè¶Šå°</p>
<p><img src="dist_avepressure_conn.png" alt="ç¦»æµ·è·ç¦»-æ—¥å¹³å‡æ°”å‹"></p>
<p><img src="dist_maxpressure_conn.png" alt="ç¦»æµ·è·ç¦»-æ—¥æœ€é«˜æ°”å‹"></p>
<p><img src="dist_minpressure_conn.png" alt="ç¦»æµ·è·ç¦»-æ—¥æœ€ä½æ°”å‹"></p>
<p>å¯¹äºé£é€Ÿæ¥è¯´ï¼Œæˆ‘ä»¬å¾—å‡ºäº†ä¸å¸¸è¯†ä¸€è‡´çš„ç»“æœï¼Œä¸€å®šè·ç¦»å†…ï¼Œç¦»æµ·è¶Šè¿œï¼Œé£é€Ÿè¶Šå°ï¼Œè€Œåˆ°äº†å†…é™†ï¼Œé£é€Ÿä¸ç¦»æµ·è·ç¦»æ²¡æœ‰ä»€ä¹ˆå…³ç³»<br><img src="dist_avespeed_conn.png" alt="ç¦»æµ·è·ç¦»-æ—¥å¹³å‡é£é€Ÿ"></p>
<ul>
<li><p>4.é€šè¿‡3ä¸­çš„åˆ†æä½¿ç”¨SVRè¿›è¡Œç›´çº¿æ‹Ÿåˆï¼Œä¸‹ä»¥ç¦»æµ·è·ç¦»-æ—¥æœ€é«˜æ¸©åº¦ä¸ºä¾‹ï¼š</p>
<pre><code>import dist_tmp_conn as dtc

from sklearn.svm import SVR
from scipy.optimize import fsolve
import matplotlib.pyplot as plt
import numpy as np

# set arange and change formatter
dist1 = dtc.dist_lst[0:6]
dist2 = dtc.dist_lst[4:11]
dist1 = [[x] for x in dist1]
dist2 = [[x] for x in dist2]
temp1 = dtc.temp_max_lst[0:6]
temp2 = dtc.temp_max_lst[4:11]

# get linear SVR obj
svr_line1 = SVR(kernel = &apos;linear&apos;, C = 1e3)
svr_line2 = SVR(kernel = &apos;linear&apos;, C = 1e3)

# input data
svr_line1.fit(dist1, temp1)
svr_line2.fit(dist2, temp2)

# draw predicted line
xp1 = np.arange(10, 210, 10).reshape((20, 1))
xp2 = np.arange(150, 500, 50).reshape((7, 1))
yp1 = svr_line1.predict(xp1)
yp2 = svr_line2.predict(xp2)

fig, ax = plt.subplots()
&apos;&apos;&apos;
# plot
plt.plot(xp1, yp1, c = &apos;g&apos;, label = &apos;strong sea effect&apos;)
plt.plot(xp2, yp2, c = &apos;b&apos;, label = &apos;weak sea effect&apos;)
plt.plot(dtc.dist_lst, dtc.temp_max_lst, &apos;ro&apos;)
plt.savefig(&quot;/home/singularity/æ¡Œé¢/weather_ana/result/dist_maxtemp_conn_SVR&quot;)
plt.show()
&apos;&apos;&apos;

# get x,y

def line1(x):
    a1 = svr_line1.coef_[0][0]
    b1 = svr_line1.intercept_[0]
    return a1 * x + b1

def line2(x):
    a2 = svr_line2.coef_[0][0]
    b2 = svr_line2.intercept_[0]
    return a2 * x + b2

def find_intersection(fun1, fun2, x0):
    return fsolve(lambda x : fun1(x) - fun2(x), x0)

result = find_intersection(line1, line2, 0.0)
print(&quot;[x,y] = [%d,%d]&quot; % (result, line1(result)))
x = np.linspace(150, 250, 10)
plt.plot(x, line1(x), x, line2(x), result, line1(result), &apos;ro&apos;)
plt.savefig(&quot;/home/singularity/æ¡Œé¢/weather_ana/result/dist_maxtemp_intsec&quot;)
plt.show()
</code></pre></li>
<li><p>5.ä¸‹é¢æ˜¯4ä¸­å¾—åˆ°çš„æ‹Ÿåˆç»“æœ</p>
</li>
</ul>
<p><img src="dist_maxtemp_conn_SVR.png" alt="ç¦»æµ·è·ç¦»-æ—¥æœ€é«˜æ°”æ¸©"></p>
<p><img src="dist_maxtemp_intsec.png" alt="ç¦»æµ·è·ç¦»-æ—¥æœ€é«˜æ°”æ¸©äº¤ç‚¹"></p>
<p><img src="dist_mintemp_conn_SVR.png" alt="ç¦»æµ·è·ç¦»-æ—¥æœ€ä½æ°”æ¸©"></p>
<p><img src="dist_mintemp_intsec.png" alt="ç¦»æµ·è·ç¦»-æ—¥æœ€ä½æ°”æ¸©äº¤ç‚¹"></p>
<p><img src="dist_maxhumidity_conn_SVR.png" alt="ç¦»æµ·è·ç¦»-æ—¥æœ€é«˜æ¹¿åº¦"></p>
<p><img src="dist_minpressure_conn_SVR.png" alt="ç¦»æµ·è·ç¦»-æ—¥æœ€ä½æ°”å‹"></p>
<p><img src="dist_speed_conn_SVR.png" alt="ç¦»æµ·è·ç¦»-æ—¥å¹³å‡é£é€Ÿ"></p>
<h2 id="5ç»“è®º"><a href="#5ç»“è®º" class="headerlink" title="$5ç»“è®º"></a>$5ç»“è®º</h2><p>ç”±$4.5ä¸­çš„ç»“æœæˆ‘ä»¬å¯ä»¥å¾—å‡ºæœ‰å…³ç»´åº¦åœ¨30åº¦å·¦å³é•¿æ±Ÿä¸‰è§’æ´²åœ°åŒºæ°”è±¡æ•°æ®å’Œç¦»æµ·è·ç¦»çš„ä¸€äº›ç»“è®ºï¼š</p>
<ul>
<li>é•¿æ±Ÿä¸‰è§’æ´²çš„åŸå¸‚ç¦»æµ·è·ç¦»è¶Šè¿œï¼Œå—æ°”æ¸©æµ·æ´‹å½±å“è¶Šå¼±ï¼Œåœ¨170kmå·¦å³æœ€é«˜æ°”æ¸©è¾¾åˆ°é¥±å’Œï¼Œæ›´è¿œåŸºæœ¬ä¸å—æµ·æ´‹ä½œç”¨ï¼Œåœ¨110kmå·¦å³æœ€ä½æ°”æ¸©è¾¾åˆ°æœ€ä½ï¼Œè€Œæ›´è¿œä¹‹åæœ€ä½æ°”æ¸©å¼€å§‹åå¸¸å‡é«˜ï¼Œå¯èƒ½ä¸åœ°åŠ¿ç­‰åŸå› ç›¸å…³</li>
<li>åœ¨å„è‡ªå¯¹åº”çš„è·ç¦»å†…ï¼Œæœ€é«˜æ¹¿åº¦ï¼ˆ300kmï¼‰å’Œæœ€ä½æ°”å‹ï¼ˆ100kmï¼‰ç¬¦åˆä¸€è‡´çš„è¶‹åŠ¿ï¼šç¦»æµ·è·ç¦»è¶Šè¿œï¼Œæœ€é«˜æ¹¿åº¦è¶Šå°ï¼Œæœ€ä½æ°”å‹è¶Šå¤§ï¼Œæ­¤å¤„è¿›ä¸€æ­¥åˆ†æå¯çŸ¥ï¼Œæœ€åä¸¤ä¸ªç‚¹ä»£è¡¨çš„åŸå¸‚ï¼šå·¢æ¹–å¸‚å’Œåˆè‚¥å¸‚ï¼Œè¾¹ä¸Šæœ‰ä¸€ä¸ªè¾ƒå¤§çš„å·¢æ¹–ï¼Œå¯èƒ½ä¼šå½±å“åˆ°è¿™ä¸¤ä¸ªåŸå¸‚æ°”å‹å’Œæ¹¿åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´æœ€é«˜æ¹¿åº¦å’Œæœ€ä½æ°”å‹ç¬¦åˆçš„ä¸‹é™è¶‹åŠ¿çš„è·ç¦»å¯èƒ½è¶…è¿‡å½“å‰å¾—å‡ºæµ·æ´‹çš„ä½œç”¨è·ç¦»ï¼Œéœ€è¦è¿›ä¸€æ­¥å®éªŒæœé›†æ›´å¤šæ•°æ®éªŒè¯</li>
<li>ç”±äºæµ·æ´‹å’Œå¤§é™†æ¯”çƒ­å®¹çš„ä¸åŒï¼Œåœ¨ä¸¤è€…äº¤ç•Œå¤„å­˜åœ¨å¤§é‡çš„æ°”æµäº¤æ¢ï¼Œæ‰€ä»¥è¶Šæ˜¯ç¦»æµ·å²¸è¿‘ï¼Œé£é€Ÿè¶Šå¤§ï¼Œå¯¹äºé•¿æ±Ÿä¸‰è§’æ´²è€Œè¨€ï¼Œè¯¥ä½œç”¨èŒƒå›´åœ¨150kmå·¦å³ä»¥å†…</li>
</ul>
<h2 id="6æ€»ç»“"><a href="#6æ€»ç»“" class="headerlink" title="$6æ€»ç»“"></a>$6æ€»ç»“</h2><p>é‡ç°æœ¬é¡¹ç›®å¯è·å¾—çš„ç»éªŒï¼š</p>
<ul>
<li>åˆ©ç”¨APIè·å¾—ç½‘ç»œæ•°æ®</li>
<li>æ°¸ä¹…æ€§æŒæ¡jsonæ ¼å¼è½¬csvæ ¼å¼</li>
<li>ç†Ÿæ‚‰pandasçš„.Series .concat .read_csvæ–¹æ³•</li>
<li>æŒæ¡jsonæ–‡ä»¶æ•°æ®çš„è¯»å–</li>
<li>ç†Ÿæ‚‰matplotlibä¸­pyplotåº“çš„ä¸€èˆ¬ä½¿ç”¨</li>
<li>äº†è§£sklearnä¸­svmçš„SVRç›´çº¿æ‹Ÿåˆ</li>
<li>äº†è§£scipyä¸­optimizeçš„fsolveæ–¹æ³•</li>
<li>äº†è§£å¦‚ä½•ä¸€æ­¥ä¸€æ­¥å‘ç°ï¼Œåˆ†ææ•°æ®ä¸­çš„è§„å¾‹</li>
</ul>

      </div>
        <div class="support-author">
          <p>æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚ ğŸ™
          <a href="https://888.com/index.html" target="_blank">å…³äºè½¬è½½è¯·çœ‹è¿™é‡Œ</a>
            <!--<a class="btn-pay"  href="#pay-modal">Â¥ æ‰“èµæ”¯æŒ</a>-->
          </p>
        </div>
        <!--
            <div class="like ">
              <div class="like-button">
                <a id="like-note" href="">
                  <i class="icon-heart"></i>å–œæ¬¢
                </a>
              </div>
              <span id="likes-count">256</span>
            </div>
        -->
        <div class="otherLink">
          <div class="previous">
          </div>
          <div class="next">
          </div>
        </div>
        <div class="comments" id="comments">
          
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script type="text/javascript">
  const gitalk = new Gitalk({
    clientID: '8888a8888',
    clientSecret: '8888886666666',
    repo: 'xxxx.github.io',
    owner: 'admin',
    admin: ['admin'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false
  })

  gitalk.render('comments');
</script>


        </div>
      </div>
    </div>
   </div>
</main>
<div class="footer">
  <div class="info">
    <p>
    <a href="https://hexo.io"> Hexo </a> å¼ºåŠ›é©±åŠ¨ |
      <a href="https://github.com/Youthink/hexo-themes-yearn"> Yearn </a>
      ä¸»é¢˜
    </p>
    <p>&copy;2018-2019 AlfredZeeçš„åšå®¢</p>
  </div>
</div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script>//console
  var consoleConfig = '\næ¬¢è¿è®¿é—® https://hufangyun.com ï¼Œå›´è§‚å°çŒ¿å¤§åœ£çš„åšå®¢(ã¥ï½¡â—•â€¿â€¿â—•ï½¡)ã¥ï¼\n,\næœ¬åšå®¢ä½¿ç”¨ %cHexo%c æ­å»ºï¼Œåšå®¢ä¸»é¢˜ä¸ºå°çŒ¿å¤§åœ£å¼€å‘çš„ %chexo-themes-yearn%c ~~~ ğŸ‰ğŸ‰ğŸ‰ \n\næºç  https://github.com/Youthink/hexo-themes-yearn \n\nå¦‚æœå–œæ¬¢å¯ä»¥ star æ”¯æŒä¸€ä¸‹ â¤ï¸~\n,\næ‰«æä¸‹é¢çš„äºŒç»´ç ï¼Œåœ¨æ‰‹æœºä¸ŠæŸ¥çœ‹åšå®¢ï¼\n,https://static.hufangyun.com/blog-url-qrcode-180-180.png,\n æƒ³çŸ¥é“è¿™ä¸ªæ•ˆæœå¦‚ä½•å®ç°çš„ï¼Ÿåšå®¢å†…æœç´¢ console å½©è›‹ ğŸš€ ï¼\n'.split(',');
  var canConsole = true;
  var consoleInfo = (function(consoleConfig) {
  if (!canConsole || !consoleConfig || consoleConfig.length < 1) {
    return;
  }
  var consoleColor = '#6190e8';
  var _console;
  var backgroundTextStyle = 'padding: 1px 5px;color: #fff;background: ' + consoleColor + ';'
  var textStyle = 'color: ' + consoleColor + ';';

  consoleConfig.map(o => {
    var num = (o.match(/%c/g) || []).length;
    if(/^http(s)?:\/\//.test(o)) {
      console.log('%c     ', 'background: url(' + o + ') no-repeat left center;font-size: 180px;');
      return;
    }
    if (num > 0) {
      var logArguments = [];
      for (var i = 0; i < num; i++) {
        if (i % 2 === 0) {
          logArguments.push(backgroundTextStyle);
        } else {
          logArguments.push(textStyle);
        }
      }
      (_console = console).log.apply(_console, ['%c' + o, textStyle].concat(logArguments));
      return;
    }
    console.log('%c' + o, textStyle);
  });
}(consoleConfig));</script><script type="text/javascript" src="/./js/main.js"></script>

  <script src="//at.alicdn.com/t/font_159214_mvtxvg9me9.js"></script>
</body>
</html>
